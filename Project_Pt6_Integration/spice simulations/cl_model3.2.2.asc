Version 4
SHEET 1 2796 832
WIRE 1872 -272 1584 -272
WIRE 2144 -272 1952 -272
WIRE 2304 -272 2224 -272
WIRE 544 -256 256 -256
WIRE 816 -256 624 -256
WIRE 976 -256 896 -256
WIRE 1584 -160 1584 -272
WIRE 256 -144 256 -256
WIRE 1584 -48 1584 -80
WIRE 2304 -48 2304 -272
WIRE 2304 -48 1584 -48
WIRE 256 -32 256 -64
WIRE 976 -32 976 -256
WIRE 976 -32 256 -32
WIRE 1584 16 1584 -48
WIRE 256 32 256 -32
WIRE 1856 208 1600 208
WIRE 2112 208 1936 208
WIRE 2592 208 2192 208
WIRE 528 224 272 224
WIRE 784 224 608 224
WIRE 1264 224 864 224
WIRE 1600 416 1600 208
WIRE 2592 416 2592 208
WIRE 272 432 272 224
WIRE 1264 432 1264 224
WIRE 1600 544 1600 496
WIRE 2592 544 2592 496
WIRE 2592 544 1600 544
WIRE 272 560 272 512
WIRE 1264 560 1264 512
WIRE 1264 560 272 560
WIRE 1600 592 1600 544
WIRE 272 608 272 560
FLAG 272 608 0
FLAG 256 32 0
FLAG 272 224 vin2
FLAG 1600 592 0
FLAG 1584 16 0
FLAG 1600 208 vin1
SYMBOL bv 272 416 R0
SYMATTR InstName Bin
SYMATTR Value V= -(k01 * I(R02) - 100) - k02 * I(R01)
SYMBOL res-dir 512 240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R01
SYMATTR Value 5.5
SYMBOL ind-dir 768 240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L01
SYMATTR Value 50µ
SYMATTR SpiceLine Rser=0
SYMBOL bv 1264 416 R0
SYMATTR InstName Bemf0
SYMATTR Value V=9e-4*I(R02)
SYMBOL bv 256 -160 R0
SYMATTR InstName BT0
SYMATTR Value V=9e-4*I(R01)
SYMBOL res-dir 528 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R02
SYMATTR Value 300n
SYMBOL ind-dir 800 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L02
SYMATTR Value 15n
SYMATTR SpiceLine Rser=0
SYMBOL bv 1600 400 R0
SYMATTR InstName Bin1
SYMATTR Value V= -(k11 * I(R12) - 100) - k12 * I(R11)
SYMBOL res-dir 1840 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R11
SYMATTR Value 5.5
SYMBOL ind-dir 2096 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L11
SYMATTR Value 50µ
SYMATTR SpiceLine Rser=0
SYMBOL bv 2592 400 R0
SYMATTR InstName Bemf1
SYMATTR Value V=9e-4*I(R12)
SYMBOL bv 1584 -176 R0
SYMATTR InstName BT1
SYMATTR Value V=9e-4*I(R11)
SYMBOL res-dir 1856 -256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 300n
SYMBOL ind-dir 2128 -256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L12
SYMATTR Value 15n
SYMATTR SpiceLine Rser=0
TEXT 464 696 Left 2 !.tran 1m
TEXT 464 736 Left 2 !.param k01=0.99706985\n.param k02=0.60183735
TEXT 472 816 Left 2 !.ic I(L2)=500
TEXT 656 816 Left 2 ;Sets initial condition for state variable
TEXT 784 760 Left 2 ;You can use .PARAM Directive to define variables
TEXT 328 312 Left 2 ;You can use B voltage source elements to define comlicated \nfunctions. Make sure the polarity of your measured quanity is correct.\n You can add an extra negation if it is not your desired polarity
TEXT 1792 720 Left 2 !.param k11=0.31344719 \n.param k12=0.17720734
TEXT 2112 744 Left 2 ;You can use .PARAM Directive to define variables
TEXT 1656 296 Left 2 ;You can use B voltage source elements to define comlicated \nfunctions. Make sure the polarity of your measured quanity is correct.\n You can add an extra negation if it is not your desired polarity
